---
title: "Jacoco + Sonarcloud ë¡œ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë¶„ì„í•˜ê¸°"
description: "Spring Boot í”„ë¡œì íŠ¸ì—ì„œ Jacocoì™€ Sonarcloudë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ë¥¼ ë¶„ì„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì."
---
`ì´ë²ˆ í¬ìŠ¤íŒ…ì€ Jacoco ë¿ë§Œ ì•„ë‹ˆë¼ Sonarcloud ë‚´ìš©ë„ ìˆê¸°ì— ì¡°ê¸ˆ ë‚´ìš©ì´ ê¸¸ ìˆ˜ ìˆë‹¤ëŠ” ì  ì°¸ê³ ë°”ëë‹ˆë‹¤.`

### ì™œ Jacocoë‘ Sonarcloudë¥¼ ë‘˜ ë‹¤ ì‘ì„±í•˜ê²Œ ë˜ì—ˆëŠ”ê°€?
ë‚˜ì¤‘ì— ì„¤ëª… ë‚˜ì˜¤ê² ì§€ë§Œ, JacocoëŠ” ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ì¸¡ì •í•œ ê²°ê³¼ë¥¼ ì €ì¥í•œ xml íŒŒì¼ë¡œ Sonarcloudì—ì„œ ë¶„ì„í•˜ê³  ì·¨ì•½ì , ì½”ë“œ ìŠ¤ë©œ ë“± ì½”ë“œ í’ˆì§ˆì„ ë¶„ì„í•´ì£¼ê¸°ì— ë™ì‹œì— ë³´ëŠ” ê²ƒì´ ë” ê¹”ë”í•˜ë‹¤ê³  ìƒê°í•˜ì˜€ë‹¤. ì‹œë¦¬ì¦ˆë¡œ êµ¬ë³„í•˜ê¸°ì—” í˜ì´ì§€ ì™”ë‹¤ê°”ë‹¤ í•´ì•¼ í•œë‹¤.


### Jacoco + Sonarcloudë¥¼ ì–´ë–»ê²Œ ì•Œê²Œ ë˜ì—ˆëŠ”ê°€?
ë””í”„ë§Œì—ì„œ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•˜ë©´ì„œ 1ì°¨ ìŠ¤í”„ë¦°íŠ¸ë¡œ Jacoco + Sonarcloudë¥¼ í™œìš©í•´ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë¶„ì„ì˜ ì˜¤í”ˆì†ŒìŠ¤ì¸ Jacocoì™€ ì½”ë“œ ìŠ¤ë©œì´ë‚˜ ë²„ê·¸, ì·¨ì•½ì ì„ ìºì¹˜í•˜ëŠ” ëª©ì ì˜ ì •ì  ì½”ë“œ ë¶„ì„ í”Œë«í¼ì¸ Sonarcloudë¥¼ ì ‘í•˜ê²Œ ë˜ì—ˆë‹¤.
ì²˜ìŒ ë“¤ì–´ë³¸ í‚¤ì›Œë“œì˜€ê³  ì˜¤í”ˆ ì†ŒìŠ¤ë¥¼ ì—°ê²°í•´ë³´ëŠ” ê²½í—˜ì´ ë³„ë¡œ ì—†ì—ˆê¸°ì— ì†ë“¤ê³  ë‚´ê°€ í•˜ê¸°ë¡œ í–ˆë‹¤. ê·¸ë ‡ê²Œ ë‚œì´ë„ëŠ” ë†’ì§€ ì•Šê³ , ì´ë•Œ ì•„ë‹ˆë©´ ê²½í—˜í•˜ê³  ì‹¶ì–´ë„ ë‚˜ì¤‘ìœ¼ë¡œ ë¯¸ë£° ê±° ê°™ë‹¤ ìƒê°ë˜ì—ˆë‹¤.


---
# Jacocoë€?
Java ì§„ì˜ì— <span style={{ textDecoration: "underline" }}>ì½”ë“œ ì»¤ë²„ë¦¬ì§€ë¥¼ ì¸¡ì •í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬</span>ì´ë‹¤.
line, branch ì»¤ë²„ë¦¬ì§€ë¥¼ ì§€ì •í•œ ê¸°ì¤€ì— ëŒ€í•´ ì¸¡ì •í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„, ê²°ê³¼ë¥¼ html, xml, csv í•„ìš”í•œ í™•ì¥ìë¡œ íŒŒì¼ ì €ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.

> ####  ì—¬ê¸°ì„œ Code Coverageë€?
ì†Œí”„íŠ¸ì›¨ì–´ í…ŒìŠ¤íŠ¸ë¥¼ ë…¼í•  ë•Œ ì–¼ë§ˆë‚˜ í…ŒìŠ¤íŠ¸ê°€ ì¶©ë¶„í•œ ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì§€í‘œì´ë‹¤.
í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í–ˆì„ ë•Œ ì½”ë“œ ìì²´ê°€ ì–¼ë§ˆë‚˜ ì‹¤í–‰ë˜ì—ˆëƒëŠ” ê²ƒì„ ì¸¡ì •

êµ¬ì„±í•˜ëŠ” ë°ì—ëŠ” ê·¸ë ‡ê²Œ ë§ì€ ëŸ¬ë‹ì»¤ë¸Œ í•„ìš”í•˜ì§€ ì•Šë‹¤. ë°”ë¡œ Setting í•´ë³¼ ê²ƒì´ë‹¤.


## 1ï¸âƒ£ build.gradle plugin ì¶”ê°€
```java
plugins {
    id 'jacoco'
}

...

jacoco {
    toolVersion = "0.8.8"
}

```

ë³„ê±° ì—†ë‹¤. plugin ì„¤ì¹˜ëŠ” ì´ë ‡ê²Œ ì¶”ê°€í•˜ê³  jacoco ë¦´ë¦¬ì¦ˆ ë²„ì „ì— ë§ì¶°ì„œ ì‘ì„±í•´ì£¼ë©´ ëœë‹¤. ë¦´ë¦¬ì¦ˆ ë²„ì „ì€ [ì—¬ê¸°](https://www.eclemma.org/jacoco/)ë¥¼ ì°¸ê³ í•˜ë©´ ëœë‹¤.

## 2ï¸âƒ£ JacocoTestCoverageVerification
JacocoTestCoverageVerificationëŠ” Jacoco í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ìœ„í•œ ruleì´ë¼ ë³´ë©´ ëœë‹¤.
```java

def QDomains = []
for (qPattern in '*.QA'..'*.QZ') { // qPattern = '*.QA', '*.QB', ... '*.QZ'
    QDomains.add(qPattern + '*')
}

def jacocoExcludePatterns = [
        // ì¸¡ì • ì•ˆí•˜ê³  ì‹¶ì€ íŒ¨í„´
        "**/*Application*",
        "**/*Config*",
        "**/*Exception*",
        "**/*Request*",
        "**/*Response*",
        "**/*Dto*",
        "**/*Interceptor*",
        "**/*Filter*",
        "**/*Resolver*",
        "**/*Entity*",
        "**/test/**",
        "**/resources/**"
]

jacocoTestCoverageVerification {

    violationRules {
        rule {
            // rule í™œì„±í™”
            enabled = true

            // í´ë˜ìŠ¤ ë‹¨ìœ„ë¡œ ë£° ì²´í¬
            element = 'CLASS'

            // ë¼ì¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ìµœì†Œ 80% ë§Œì¡±
            limit {
                counter = 'LINE'
                value = 'COVEREDRATIO'
                minimum = 0.80
            }
            
            // ë¸Œëœì¹˜ ì»¤ë²„ë¦¬ì§€ë¥¼ ìµœì†Œ 80% ë§Œì¡±
            limit {
                counter = 'BRANCH'
                value = 'COVEREDRATIO'
                minimum = 0.80
            }
            
            excludes = jacocoExcludePatterns + QDomains
        }
    }
}
```
ì´ì™€ ê°™ì´ ë¼ì¸, ë¸Œëœì¹˜ ì»¤ë²„ë¦¬ì§€ë¥¼ ì„¤ì •í•˜ê³  ruleë¥¼ ì •í•  ìˆ˜ ìˆë‹¤.
ì—¬ê¸°ì„œ jacocoExcludePatternsëŠ” ì£¼ì„ì—ë„ ë‹¬ì•˜ë“¯ì´ ì¸¡ì • ì•ˆí•˜ê³  ì‹¶ì€ Java íŒŒì¼ë“¤ì„ ëª…ì‹œí•œ ê²ƒì´ë‹¤.
ê·¸ë¦¬ê³  QDomainsëŠ” QueryDslì„ ì‚¬ìš©í•˜ê¸° build ì‹œ Qí´ë˜ìŠ¤ê°€ ìƒì„±ë˜ì–´ ì œì™¸ì‹œí‚¤ê¸° ìœ„í•´ ìƒì„±ëœ ë°°ì—´ì´ë‹¤.

## 3ï¸âƒ£ JacocoTestReport

ìœ„ì—ì„œ ì •ì˜í•œ JacocoTestCoverageVerificationì˜ ruleë¡œ JacocoTestReportëŠ” ì´ì œ ê²€ì‚¬í•˜ê³ ì í•œë‹¤.
```java

tasks.named('test') {
    useJUnitPlatform()
    finalizedBy 'jacocoTestReport'
}

def jacocoDir = layout.buildDirectory.dir("reports/")

jacocoTestReport {
    dependsOn test	// í…ŒìŠ¤íŠ¸ê°€ ìˆ˜í–‰ë˜ì–´ì•¼ë§Œ reportë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
    reports {
        html.required.set(true)
        xml.required.set(true)
        csv.required.set(true)
        html.destination jacocoDir.get().file("jacoco/index.html").asFile
        xml.destination jacocoDir.get().file("jacoco/index.xml").asFile
        csv.destination jacocoDir.get().file("jacoco/index.csv").asFile
    }

    afterEvaluate {
        classDirectories.setFrom(
                files(classDirectories.files.collect {
                    fileTree(dir: it, excludes: jacocoExcludePatterns + QDomains) // Querydsl ê´€ë ¨ ì œê±°
                })
        )
    }
    finalizedBy jacocoTestCoverageVerification
}
```
JacocoTestReportì—ì„œ reportsëŠ” html, xml, csvë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ì˜€ê³ , ì „ì—­ ë³€ìˆ˜ë¡œ ìƒì„±í•œ jacocoDirì€ build ë””ë ‰í† ë¦¬ í•˜ìœ„ë¡œ reportsë¥¼ ìƒì„±í•˜ì—¬ report íŒŒì¼ì„ í•´ë‹¹ ê²½ë¡œì— ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ì˜€ë‹¤.
ë˜í•œ afterEvaluateë¡œ íŠ¹ì • íŒŒì¼ ë° ë””ë ‰í† ë¦¬(jacocoExcludePatterns + QDomains)ë¥¼ ì œì™¸í•˜ê¸° ìœ„í•´ ì„¤ì •í•˜ì˜€ë‹¤.


## ğŸŠ ì‹¤í–‰ ê²°ê³¼

ì„¤ì •ì„ ë‹¤ ë§ˆì³¤ë‹¤.
ê·¸ëŸ¼ build.gradleë¥¼ ë‹¤ì‹œ refreshí•˜ê³  gradle í•­ëª©ì—ì„œ ì™¼ìª½ ì´ë¯¸ì§€ì— ìˆëŠ” jacocoTestReportë¥¼ ì‹¤í–‰í•´ë³´ì
ì‹¤í–‰ì´ ë˜ë©´ ì•„ë˜ build íŒŒì¼ì— ì •ìƒì ìœ¼ë¡œ reports/jacoco ê²½ë¡œì— ì„¤ì •í•œ íŒŒì¼ë“¤ì´ ì €ì¥ë˜ì–´ ìˆì„ ê²ƒì´ë‹¤.

<img src="https://velog.velcdn.com/images/uiurihappy/post/3b0857d1-4dde-40f1-af2d-fbb4585308d7/image.png" /> | <img src="https://velog.velcdn.com/images/uiurihappy/post/388ab77b-1876-415d-9bcc-ac8e0a8e596f/image.png" /> 
---|---|

ê²½ë¡œì— ìˆëŠ” index.htmlì„ í¬ë¡¬ìœ¼ë¡œ ì‹¤í–‰í•˜ì—¬ ì´ì™€ ê°™ì´ ê²°ê³¼ reportë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
<img src="https://velog.velcdn.com/images/uiurihappy/post/f3d1477a-feb5-400b-b352-41f373109236/image.png" alt="image" width="100%" />

ì´ì œëŠ” Sonarcloudì™€ ì—°ë™ì„ í•´ë³¼ ê²ƒì´ë‹¤.


---
# Sonarcloud?
<span style={{ textDecoration: "underline" }}>ì •ì  ì½”ë“œ ë¶„ì„ í”Œë«í¼ì¸ SonarCloud ë˜í•œ SonarQubeì™€ ê°™ì´ ì½”ë“œ í’ˆì§ˆì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë„êµ¬</span>ì´ë‹¤. Githubê³¼ Bitbucket ê°™ì€ ì½”ë“œ ì €ì¥ì†Œì™€ ì›í™œí•˜ê²Œ í†µí•©ë˜ì–´ ì½”ë“œ í’ˆì§ˆ ë¶„ì„ì˜ ìë™í™”ë¥¼ í¸ë¦¬í•˜ê²Œ ì§€ì›í•œë‹¤.
SonarCloudëŠ” í´ë¼ìš°ë“œ ê¸°ë°˜ì˜ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ë¡œ SonarQubeì™€ ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ë§Œ í´ë¼ìš°ë“œ ìƒì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ìì²´ ì„œë²„ë¥¼ ì„¤ì¹˜í•˜ê±°ë‚˜ ìœ ì§€ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ë‹¤.

> #### ğŸ›  ì—¬ê¸°ì„œ ì •ì  ì½”ë“œ ë¶„ì„ì´ë€?
ì •ì  ì½”ë“œ ë¶„ì„ì´ë€ ë‹¨ì–´ ê·¸ëŒ€ë¡œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šê³  ì •ì ìœ¼ë¡œ ì½”ë“œë¥¼ ë¶„ì„í•˜ëŠ” ê²ƒì„ ëœ»í•œë‹¤.
ì†ŒìŠ¤ ì½”ë“œì˜ í’ˆì§ˆì„ ë†’ì´ê¸° ìœ„í•´ ì ì¬ì ì¸ ë²„ê·¸ë‚˜ ì½”ë”© ì»¨ë²¤ì…˜ì— ì–´ê¸‹ë‚œ ë¶€ë¶„ì„ ì°¾ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

### âœ¨ ì •ì  ì½”ë“œ ë¶„ì„ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ”?
ì •ì  ì½”ë“œ ë¶„ì„ì„ ì‚¬ìš©í•˜ë©´ í”íˆ ì½”ë“œ ìŠ¤ë©œ(code smell) ì´ë¼ê³  ë¶ˆë¦¬ëŠ” ë¬¸ì œë“¤ê³¼ ë³´ì•ˆ ì·¨ì•½ì  ë“±ì˜ ë¬¸ì œë¥¼ ì‚¬ì „ì— ì°¾ì•„ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì ì¬ì ìœ¼ë¡œ ë²„ê·¸ê°€ ë°œìƒí•  ìˆ˜ë„ ìˆëŠ” ì½”ë“œë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.
- ì½”ë“œ ìŠ¤íƒ€ì¼(ì½”ë”© ì»¨ë²¤ì…˜) ìœ„ë°˜ ì—¬ë¶€ë¥¼ íŒë‹¨í•  ìˆ˜ ìˆë‹¤.
- ì˜¤íƒ€ë¥¼ ì°¾ì•„ë‚¼ ìˆ˜ ìˆë‹¤.
- ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì½”ë“œë¥¼ ì°¾ì•„ë‚¼ ìˆ˜ ìˆë‹¤.
- ì ì¬ì ì¸ ë³´ì•ˆ ì·¨ì•½ì ì„ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.

## 1ï¸âƒ£ SonarCloud ê³„ì • ë§Œë“¤ê¸°
[Sonarcloud signUp ë§í¬](https://www.sonarsource.com/products/sonarcloud/signup/)ë¡œ í†µí•´ íšŒì›ê°€ì…ì´ ê°€ëŠ¥í•˜ë‹¤. 

<img src="https://velog.velcdn.com/images/uiurihappy/post/bc542028-af9f-4604-b237-e054f658ac93/image.png" alt="image" width="100%" />

## 2ï¸âƒ£ SonarCloud Organization ìƒì„± ë° ì„¤ì¹˜
í•„ìëŠ” ì´ë¯¸ ë””í”„ë§Œ organizationì´ ì¡´ì¬í•˜ê¸°ì— í”„ë¡œì íŠ¸ë¥¼ ë§ì¶° ì„¤ì •í•´ì£¼ì—ˆë‹¤.

<img src="https://velog.velcdn.com/images/uiurihappy/post/9c324a06-4dd5-470a-817b-625634f80b42/image.png" alt="image" width="100%" />

ìœ„ Import an organization from Githubë¥¼ í†µí•´ ì„¤ì¹˜í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì—°ë™í•˜ì˜€ë‹¤.
ì•„ë˜ ì°¸ê³  ë§í¬ë¥¼ í†µí•´ í™•ì¸í•˜ì—¬ Projectì— ì„¤ì¹˜í•  ìˆ˜ ìˆë„ë¡ í•˜ì

## 3ï¸âƒ£ Project í™•ì¸
<img src="https://velog.velcdn.com/images/uiurihappy/post/6c510dbb-9cdb-470b-bfb2-5d8ec0672004/image.png" alt="image" width="100%" />

ì„¤ì¹˜ê°€ ë˜ì—ˆë‹¤ë©´ ì´ë ‡ê²Œ ëŒ€ì‹œë³´ë“œê°€ ë³´ì´ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

## 4ï¸âƒ£ Automatic Analysis Disable


SonarCloudëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Automatic Analysisë¥¼ ì§€ì›í•œë‹¤. ê·¸ëŸ¬ë‚˜ ìš°ë¦¬ëŠ” CI ì‘ì—… ê³¼ì •ì—ì„œ ë¶„ì„ì„ ìˆ˜í–‰í•  ê²ƒì´ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì˜µì…˜ì€ off í›„ ì§„í–‰í•  ê²ƒì´ë‹¤. (CI-based AnalysisëŠ” Automatic Analysisì™€ í•¨ê»˜ ì‹¤í–‰í•˜ë©´ ì¶©ëŒì´ ë‚˜ë¯€ë¡œ ë°˜ë“œì‹œ ë¹„í™œì„±í™” í•´ì•¼ í•œë‹¤.)

ë§Œì•½ CI-based Analysisë¥¼ í•  ê²ƒì¸ë° Automatic Analysisë¥¼ ë™ì‹œì— í•˜ê²Œ ë˜ë©´ 
`You are running CI analysis while Automatic Analysis is enabled. Please consider disabling one or the other.` ì—ëŸ¬ë¥¼ ë°œê²¬í•  ê²ƒì´ë‹¤. ì‹¤ì œë¡œ ì´ ì—ëŸ¬ ì ‘í•˜ì˜€ê³ , Organization Admin ê¶Œí•œìœ¼ë¡œ Analysis ì˜µì…˜ì„ disable í–ˆë‹¤.

1. Administration -> Analysis Method
2. Automatic Analysis disable

ì•„ë˜ ë§í¬ë¥¼ ì²¨ë¶€í–ˆìœ¼ë‹ˆ projectKeyëŠ” í”„ë¡œì íŠ¸ informationì—ì„œ í™•ì¸ ê°€ëŠ¥í•˜ë‹ˆ ì•Œë§ê²Œ ìˆ˜ì •í•˜ê³  ë§í¬ë¥¼ ì ‘ì†í•˜ì.
https://sonarcloud.io/project/analysis_method?id={projectKey}

## 5ï¸âƒ£ Spring boot Setting
Sonarcloud ì—°ê²°ê³¼ ì„¸íŒ…ì„ ë§ˆì³¤ìœ¼ë‹ˆ í”„ë¡œì íŠ¸ì—ì„œ plugInê³¼ ì„¸íŒ…ì„ í•´ë³¼ ê²ƒì´ë‹¤.
ë³¸ ì„¸íŒ…ì€ gradle í™˜ê²½ì—ì„œ êµ¬ì„±í–ˆë‹¤.

```java
// build.gradle
plugins {
	...
    id 'jacoco'
    id 'org.sonarqube' version '4.4.1.3373'
}
...
sonar {
    properties {
        property "sonar.projectKey", "depromeet_10mm-server"
        property "sonar.organization", "depromeet-1"
        property "sonar.host.url", "https://sonarcloud.io"
        property 'sonar.sources', 'src'
        property 'sonar.language', 'java'
        property 'sonar.sourceEncoding', 'UTF-8'
        property 'sonar.test.exclusions', jacocoExcludePatterns.join(',')
        property 'sonar.test.inclusions', '**/*Test.java'
        property 'sonar.java.coveragePlugin', 'jacoco'
        property 'sonar.coverage.jacoco.xmlReportPaths', jacocoDir.get().file("jacoco/index.xml").asFile
    }
}

```
gradleì—ì„œëŠ” ì´ê²Œ ì „ë¶€ë‹¤.
SonarCloud ê¸°ë³¸ ì„¤ì •ë§Œìœ¼ë¡œëŠ” í”„ë¡œì íŠ¸ì˜ Test Coverageë¥¼ í™•ì¸í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì¶”ê°€ì ì¸ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤! ê·¸ë˜ì„œ Jacocoë¡œ ê²€ì‚¬í•œ Test Coverage ê²°ê³¼ë¥¼ xmlë¡œ ì €ì¥í•˜ì—¬ Sonarcloud í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê²€ì‚¬í•  ë•Œ ì‚¬ìš©ëœë‹¤. ì°¸ê³  ë§í¬ 3ë²ˆì§¸ ë§í¬ì— ì–¸ì–´ í™˜ê²½ì— ì•Œë§ì€ ì„¤ì • ë‚´ìš©ì´ ìˆë‹¤.

## 6ï¸âƒ£ Github Actions Workflow Setting
ì´ì œ Settingí•œ gradle ë‚´ìš©ìœ¼ë¡œ CI í™˜ê²½ì—ì„œ êµ¬ë™ ë° í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ê²ƒì´ë‹¤.

```yaml
name: develop(pull_request) Check Style And Test
on:
  pull_request:
    branches:
      - develop
jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        java-version: [ 17 ]
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          java-version: ${{ matrix.java-version }}
          distribution: 'adopt'

      - name: Grant execute permission for gradlew
        run: chmod +x ./gradlew

      - name: Cache SonarCloud packages
        uses: actions/cache@v3
        with:
          path: ~/.sonar/cache
          key: ${{ runner.os }}-sonar
          restore-keys: ${{ runner.os }}-sonar

      - name: Setup Gradle
        uses: gradle/gradle-build-action@v2
        with:
          arguments: check
          cache-read-only: ${{ github.ref != 'refs/heads/main' && github.ref != 'refs/heads/develop' }}

      - name: SonarCloud scan
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
        run: ./gradlew sonar --info --stacktrace

```
ì´ì™€ ê°™ì´ í•„ìì˜ í”„ë¡œì íŠ¸ëŠ” PRì‹œ ì‹¤í–‰ë˜ëŠ” CI workflow íŒŒì¼ì´ë‹¤.
sonarcloudì—ì„œ ì‹¤í–‰ëœ ë‚´ìš©ì€ ~/.sonar/cache ë””ë ‰í† ë¦¬ì— ìºì‹±í•  ìˆ˜ ìˆë„ë¡ pathë¥¼ ì„¤ì •í•˜ì˜€ë‹¤.
ê·¸ë¦¬ê³  ì´ workflowì—ì„œ sonarë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ë‘ ê°€ì§€ secretsë¥¼ ì‚¬ìš©í•˜ëŠ”ë°
- `GITHUB_TOKEN`: Githubì—ì„œ ì œê³µë˜ëŠ” Tokenì´ê¸°ì— ë³„ë„ ì„¤ì •ì´ ì—†ì–´ë„ ëœë‹¤.
- `SONAR_TOKEN`: Sonarcloudì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì¸ì¦í•˜ëŠ” ë°ì— ì‚¬ìš©ë˜ëŠ” í† í°ì´ë‹¤. í•´ë‹¹ [ë§í¬](https://sonarcloud.io/account/security/)ì—ì„œ í† í°ì„ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆë‹¤.

ë°œê¸‰ë°›ì€ í† í°ì€ Repository secrets í™˜ê²½ ë³€ìˆ˜ë¡œ ë“±ë¡í•˜ì—¬ ì§„í–‰í•˜ë©´ ëœë‹¤. ë“±ë¡í•˜ëŠ” ë²•ì€ ì–´ë µì§€ ì•Šê¸°ì— ë³„ë„ ì„¤ëª…ì€ ìƒëµí•  ê²ƒì´ë‹¤.


## â­ï¸ ê²°ê³¼ í™•ì¸
ì§„í–‰í–ˆë˜ ë¸Œëœì¹˜ì— PRì„ ì˜¬ë¦¬ê³  Github Actions CIë¡œ ì§„í–‰ëœ ê²°ê³¼ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.
í˜„ì¬ëŠ” í”„ë¡œì íŠ¸ ì´ˆê¸°ì´ê¸°ì— No Coverage Information, No Duplication information ì´ë ‡ê²Œ ë³´ì¼ ìˆ˜ ìˆëŠ”ë°
<img src="https://velog.velcdn.com/images/uiurihappy/post/09dd9033-28a2-46e7-9a13-177efb0d6fc2/image.png" alt="image" width="100%" />

Jacocoì—ì„œ ì„¤ì •í–ˆë˜ ë¼ì¸, ë¸Œëœì¹˜ ì»¤ë²„ë¦¬ì§€ ì„¤ì •ì„ í–ˆë‹¤ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë„ ì–»ì„ ìˆ˜ ìˆê³ , ë§í¬ë”°ë¼ ì½”ë“œ ìŠ¤ë©œ, ë²„ê·¸, ì·¨ì•½ì„± ë¶„ì„ ê²°ê³¼ê°€ ë³´ì—¬ì§€ë‹ˆ í™œìš©í•˜ëŠ” ìš©ë„ê°€ ì—¬ëŸ¬ ë°©ë©´ì´ ìˆì„ ìˆ˜ ìˆë‹¤.
<img src="https://velog.velcdn.com/images/uiurihappy/post/cc377df6-853e-40da-bcff-222cf8aaf1b7/image.png" alt="image" width="100%" />



### ì°¸ê³ 
- https://velog.io/@chaerim1001/Springboot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-SonarCloud%EB%A1%9C-%EC%A0%95%EC%A0%81-%EC%BD%94%EB%93%9C-%EB%B6%84%EC%84%9D%ED%95%98%EA%B8%B0-with-github-actions
- https://docs.sonarsource.com/sonarcloud/advanced-setup/automatic-analysis/
- https://docs.sonarsource.com/sonarcloud/enriching/test-coverage/overview/

